<!DOCTYPE html>
<html lang="ja" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>osAIfu „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-item { 
            transition: all 0.2s ease;
            border-radius: 8px;
        }
        .nav-item:hover { 
            background-color: rgba(99, 91, 255, 0.1);
        }
        .nav-item.active { 
            background-color: rgba(99, 91, 255, 0.15);
            color: #635BFF;
        }
        .view-section { 
            display: none; 
        }
        .view-section.active { 
            display: block; 
        }
        .progress-bar {
            background: linear-gradient(90deg, #635BFF 0%, #8B7EFF 100%);
        }
        .card-visual {
            background: linear-gradient(135deg, #635BFF 0%, #8B7EFF 100%);
            transform: perspective(800px) rotateX(3deg) rotateY(-1deg);
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        .status-active { background-color: #10b981; }
        .status-paused { background-color: #f59e0b; }
        .status-frozen { background-color: #ef4444; }
        .lang-btn.active {
            background-color: #635BFF;
            color: white;
        }
        .badge-approved { background: rgba(16, 185, 129, 0.15); color: #10b981; }
        .badge-blocked { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .badge-frozen { background: rgba(245, 158, 11, 0.15); color: #f59e0b; }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 50;
            background-color: rgba(0, 0, 0, 0.75);
            animation: fadeIn 0.2s ease-out;
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        /* Step animations */
        .step-content {
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease-in-out;
        }
        .step-content.active {
            transform: translateX(0);
            opacity: 1;
        }
        .step-content.prev {
            transform: translateX(-100%);
        }
        
        /* Success animation */
        @keyframes checkmark {
            0% { transform: scale(0) rotate(45deg); }
            50% { transform: scale(1.2) rotate(45deg); }
            100% { transform: scale(1) rotate(45deg); }
        }
        .checkmark {
            animation: checkmark 0.6s ease-in-out;
        }
        
        /* Card animation */
        @keyframes cardAppear {
            0% { transform: translateY(20px) rotateY(20deg); opacity: 0; }
            100% { transform: translateY(0) rotateY(0deg); opacity: 1; }
        }
        .card-appear {
            animation: cardAppear 0.8s ease-out;
        }
        
        /* Range slider styles */
        .range-slider {
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #374151;
            outline: none;
        }
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #635BFF;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #635BFF;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: .3s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #635BFF;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* Inline edit */
        .inline-edit {
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .inline-edit:hover {
            background-color: rgba(99, 91, 255, 0.1);
        }
        .inline-edit-input {
            background: transparent;
            border: 1px solid #635BFF;
            border-radius: 4px;
            padding: 2px 6px;
            width: 100px;
            color: inherit;
            font-size: inherit;
            font-family: inherit;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#635BFF'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-950 text-white h-full">
    <div class="flex h-full">
        <!-- Sidebar -->
        <nav class="bg-gray-900 w-64 flex-shrink-0 border-r border-gray-800 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center space-x-3">
                    <span class="text-2xl">üëõ</span>
                    <span class="text-xl font-semibold">osAIfu</span>
                </div>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 p-4">
                <ul class="space-y-1">
                    <li>
                        <a href="#" onclick="showView('overview')" class="nav-item active flex items-center space-x-3 px-3 py-2.5 text-sm font-medium">
                            <span>üìä</span>
                            <span data-i18n="overview">Ê¶ÇË¶Å</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showView('transactions')" class="nav-item flex items-center space-x-3 px-3 py-2.5 text-sm font-medium">
                            <span>üìã</span>
                            <span data-i18n="transactions">ÂèñÂºïÂ±•Ê≠¥</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showView('cards')" class="nav-item flex items-center space-x-3 px-3 py-2.5 text-sm font-medium">
                            <span>üí≥</span>
                            <span data-i18n="cards">„Ç´„Éº„ÉâÁÆ°ÁêÜ</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showView('policies')" class="nav-item flex items-center space-x-3 px-3 py-2.5 text-sm font-medium">
                            <span>üõ°Ô∏è</span>
                            <span data-i18n="policies">„Éù„É™„Ç∑„Éº</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showView('api')" class="nav-item flex items-center space-x-3 px-3 py-2.5 text-sm font-medium">
                            <span>‚ö°</span>
                            <span data-i18n="api">API</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- User Account -->
            <div class="p-4 border-t border-gray-800">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-sm font-semibold">U</div>
                    <div>
                        <div class="text-sm font-medium">User Account</div>
                        <div class="text-xs text-gray-400">Pro Plan</div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <!-- Header -->
            <header class="bg-gray-950 border-b border-gray-800 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 id="page-title" class="text-xl font-semibold" data-i18n="overview">Ê¶ÇË¶Å</h1>
                        <p id="page-subtitle" class="text-sm text-gray-400" data-i18n="overview_subtitle">AI „Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆË≤°ÂãôÊ¥ªÂãï„ÇíÁõ£Ë¶ñ</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Language Toggle -->
                        <div class="flex items-center bg-gray-800 rounded-lg p-1">
                            <button id="lang-jp" class="lang-btn px-3 py-1.5 rounded-md text-sm font-medium transition-colors active" onclick="switchLanguage('jp')">JP</button>
                            <button id="lang-en" class="lang-btn px-3 py-1.5 rounded-md text-sm font-medium transition-colors text-gray-400" onclick="switchLanguage('en')">EN</button>
                        </div>
                    </div>
                </div>
            </header>

            <div class="p-6 max-w-7xl mx-auto">
                <!-- Overview Section -->
                <section id="overview-view" class="view-section active">
                    <!-- Key Metrics -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
                        <!-- Monthly Spend -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm text-gray-400" data-i18n="monthly_spend">‰ªäÊúà„ÅÆÂà©Áî®È°ç</p>
                                    <p class="text-2xl font-semibold">¬•746,500</p>
                                    <p class="text-sm text-gray-400">$5,120 USD</p>
                                </div>
                                <div class="text-3xl">üí∞</div>
                            </div>
                            <div class="mt-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-400" data-i18n="budget_usage">‰∫àÁÆó‰ΩøÁî®Áéá</span>
                                    <span>74%</span>
                                </div>
                                <div class="w-full bg-gray-800 rounded-full h-2">
                                    <div class="progress-bar h-2 rounded-full" style="width: 74%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Active Agents -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm text-gray-400" data-i18n="active_agents">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Ç®„Éº„Ç∏„Çß„É≥„Éà</p>
                                    <p class="text-2xl font-semibold" id="agent-count">4</p>
                                    <p class="text-sm text-green-400" data-i18n="all_operational">„Åô„Åπ„Å¶Á®ºÂÉç‰∏≠</p>
                                </div>
                                <div class="text-3xl">ü§ñ</div>
                            </div>
                            <div class="mt-4">
                                <button onclick="openAgentCreationModal()" class="w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium" data-i18n="add_agent">
                                    + „Ç®„Éº„Ç∏„Çß„É≥„ÉàËøΩÂä†
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Agent List -->
                    <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-6" data-i18n="agents_list">„Ç®„Éº„Ç∏„Çß„É≥„Éà‰∏ÄË¶ß</h3>
                        <div id="agents-container" class="space-y-4">
                            <!-- Agent 1 -->
                            <div class="flex items-center justify-between py-4 border-b border-gray-800 last:border-b-0">
                                <div class="flex items-center space-x-4">
                                    <div class="status-dot status-active"></div>
                                    <div>
                                        <h4 class="font-medium">Ad-Optimizer</h4>
                                        <p class="text-sm text-gray-400">Marketing Team</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-6">
                                    <div class="w-32">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-400">Âà©Áî®È°ç</span>
                                            <span><span class="inline-edit" data-current="320000" data-max="400000" onclick="enableInlineEdit(this)">¬•320K</span> / ¬•400K</span>
                                        </div>
                                        <div class="w-full bg-gray-800 rounded-full h-1.5">
                                            <div class="progress-bar h-1.5 rounded-full" style="width: 80%"></div>
                                        </div>
                                    </div>
                                    <span class="badge-approved px-3 py-1 rounded-full text-xs font-medium" data-i18n="active">ÊúâÂäπ</span>
                                </div>
                            </div>

                            <!-- Agent 2 -->
                            <div class="flex items-center justify-between py-4 border-b border-gray-800 last:border-b-0">
                                <div class="flex items-center space-x-4">
                                    <div class="status-dot status-active"></div>
                                    <div>
                                        <h4 class="font-medium">Data-Crawler</h4>
                                        <p class="text-sm text-gray-400">Data Team</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-6">
                                    <div class="w-32">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-400">Âà©Áî®È°ç</span>
                                            <span><span class="inline-edit" data-current="186000" data-max="300000" onclick="enableInlineEdit(this)">¬•186K</span> / ¬•300K</span>
                                        </div>
                                        <div class="w-full bg-gray-800 rounded-full h-1.5">
                                            <div class="progress-bar h-1.5 rounded-full" style="width: 62%"></div>
                                        </div>
                                    </div>
                                    <span class="badge-approved px-3 py-1 rounded-full text-xs font-medium" data-i18n="active">ÊúâÂäπ</span>
                                </div>
                            </div>

                            <!-- Agent 3 -->
                            <div class="flex items-center justify-between py-4 border-b border-gray-800 last:border-b-0">
                                <div class="flex items-center space-x-4">
                                    <div class="status-dot status-active"></div>
                                    <div>
                                        <h4 class="font-medium">SaaS-Manager</h4>
                                        <p class="text-sm text-gray-400">IT Team</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-6">
                                    <div class="w-32">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-400">Âà©Áî®È°ç</span>
                                            <span><span class="inline-edit" data-current="143000" data-max="200000" onclick="enableInlineEdit(this)">¬•143K</span> / ¬•200K</span>
                                        </div>
                                        <div class="w-full bg-gray-800 rounded-full h-1.5">
                                            <div class="progress-bar h-1.5 rounded-full" style="width: 71%"></div>
                                        </div>
                                    </div>
                                    <span class="badge-approved px-3 py-1 rounded-full text-xs font-medium" data-i18n="active">ÊúâÂäπ</span>
                                </div>
                            </div>

                            <!-- Agent 4 -->
                            <div class="flex items-center justify-between py-4">
                                <div class="flex items-center space-x-4">
                                    <div class="status-dot status-paused"></div>
                                    <div>
                                        <h4 class="font-medium">Code-Assistant</h4>
                                        <p class="text-sm text-gray-400">Engineering Team</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-6">
                                    <div class="w-32">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-400">Âà©Áî®È°ç</span>
                                            <span><span class="inline-edit" data-current="98000" data-max="200000" onclick="enableInlineEdit(this)">¬•98K</span> / ¬•200K</span>
                                        </div>
                                        <div class="w-full bg-gray-800 rounded-full h-1.5">
                                            <div class="progress-bar h-1.5 rounded-full" style="width: 49%"></div>
                                        </div>
                                    </div>
                                    <span class="badge-frozen px-3 py-1 rounded-full text-xs font-medium" data-i18n="paused">‰∏ÄÊôÇÂÅúÊ≠¢</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Transactions Section -->
                <section id="transactions-view" class="view-section">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold" data-i18n="transactions">ÂèñÂºïÂ±•Ê≠¥</h2>
                        <p class="text-sm text-gray-400" data-i18n="transactions_subtitle">„Åô„Åπ„Å¶„ÅÆÂèñÂºï„ÇíË°®Á§∫</p>
                    </div>

                    <!-- Filters -->
                    <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-4 mb-6">
                        <div class="flex flex-wrap gap-4">
                            <input type="text" data-i18n-placeholder="search_transactions" placeholder="ÂèñÂºï„ÇíÊ§úÁ¥¢..." class="flex-1 min-w-64 bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-sm">
                            <select class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-sm">
                                <option data-i18n="all_agents">ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà</option>
                                <option>Ad-Optimizer</option>
                                <option>Data-Crawler</option>
                                <option>SaaS-Manager</option>
                                <option>Code-Assistant</option>
                            </select>
                            <select class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-sm">
                                <option data-i18n="last_30_days">ÈÅéÂéª30Êó•</option>
                                <option data-i18n="last_7_days">ÈÅéÂéª7Êó•</option>
                                <option data-i18n="today">‰ªäÊó•</option>
                            </select>
                        </div>
                    </div>

                    <!-- Transactions Table -->
                    <div class="bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-800/50">
                                    <tr>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="agent">„Ç®„Éº„Ç∏„Çß„É≥„Éà</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="merchant">Âä†ÁõüÂ∫ó</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="amount">ÈáëÈ°ç</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="status">„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="time">ÊôÇÈñì</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-800">
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Ad-Optimizer</td>
                                        <td class="py-3 px-4 text-sm">Google Ads</td>
                                        <td class="py-3 px-4 text-sm font-mono">¬•45,000</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="approved">ÊâøË™çÊ∏à„Åø</span></td>
                                        <td class="py-3 px-4 text-sm text-gray-400" data-i18n="time_2h_ago">2ÊôÇÈñìÂâç</td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">SaaS-Manager</td>
                                        <td class="py-3 px-4 text-sm">Notion API</td>
                                        <td class="py-3 px-4 text-sm font-mono">¬•3,200</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="approved">ÊâøË™çÊ∏à„Åø</span></td>
                                        <td class="py-3 px-4 text-sm text-gray-400" data-i18n="time_4h_ago">4ÊôÇÈñìÂâç</td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Data-Crawler</td>
                                        <td class="py-3 px-4 text-sm" data-i18n="unknown_merchant">‰∏çÊòé„Å™Âä†ÁõüÂ∫ó</td>
                                        <td class="py-3 px-4 text-sm font-mono">¬•89,000</td>
                                        <td class="py-3 px-4"><span class="badge-blocked px-2 py-1 rounded-full text-xs" data-i18n="blocked">„Éñ„É≠„ÉÉ„ÇØ</span></td>
                                        <td class="py-3 px-4 text-sm text-gray-400" data-i18n="time_6h_ago">6ÊôÇÈñìÂâç</td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Code-Assistant</td>
                                        <td class="py-3 px-4 text-sm">AWS Lambda</td>
                                        <td class="py-3 px-4 text-sm font-mono">¬•12,800</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="approved">ÊâøË™çÊ∏à„Åø</span></td>
                                        <td class="py-3 px-4 text-sm text-gray-400" data-i18n="time_8h_ago">8ÊôÇÈñìÂâç</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Cards Section -->
                <section id="cards-view" class="view-section">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold" data-i18n="cards">„Ç´„Éº„ÉâÁÆ°ÁêÜ</h2>
                        <p class="text-sm text-gray-400" data-i18n="cards_subtitle">„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÇíÁÆ°ÁêÜ</p>
                    </div>

                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <!-- Card Visual -->
                        <div>
                            <div class="card-visual w-full max-w-sm h-48 rounded-2xl relative overflow-hidden shadow-2xl">
                                <div class="absolute inset-0 p-6 flex flex-col justify-between">
                                    <div class="flex justify-between items-start">
                                        <div class="text-white">
                                            <div class="text-sm opacity-80">Virtual Card</div>
                                            <div class="font-semibold">Ad-Optimizer</div>
                                        </div>
                                        <div class="text-white text-xl font-bold">VISA</div>
                                    </div>
                                    <div class="flex justify-between items-end text-white">
                                        <div>
                                            <div class="text-xs opacity-80">Agent ID</div>
                                            <div class="font-mono text-sm">AD-OPT-001</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-xs opacity-80">Monthly Limit</div>
                                            <div class="font-semibold">¬•400,000</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Details -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold" data-i18n="card_details">„Ç´„Éº„ÉâË©≥Á¥∞</h3>
                                <button onclick="openCardIssuanceModal('Ad-Optimizer')" class="bg-primary text-white px-3 py-1.5 rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium" data-i18n="add_card">
                                    + „Ç´„Éº„ÉâËøΩÂä†
                                </button>
                            </div>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-400" data-i18n="card_number">„Ç´„Éº„ÉâÁï™Âè∑</span>
                                    <span class="font-mono">**** **** **** 3847</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400" data-i18n="status">„Çπ„ÉÜ„Éº„Çø„Çπ</span>
                                    <span class="text-green-400" data-i18n="active">ÊúâÂäπ</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400" data-i18n="monthly_spend">ÊúàÈñìÂà©Áî®È°ç</span>
                                    <span>¬•320,000 / ¬•400,000</span>
                                </div>
                            </div>
                            <div class="pt-4 space-y-2">
                                <button class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium" data-i18n="view_details">
                                    Ë©≥Á¥∞Ë°®Á§∫
                                </button>
                                <button class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium" data-i18n="freeze_card">
                                    „Ç´„Éº„ÉâÂáçÁµê
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Cards List -->
                    <div class="bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden">
                        <div class="p-6 border-b border-gray-800">
                            <h3 class="text-lg font-semibold" data-i18n="all_cards">ÂÖ®„Ç´„Éº„Éâ</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-800/50">
                                    <tr>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="agent">„Ç®„Éº„Ç∏„Çß„É≥„Éà</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="card_number">„Ç´„Éº„ÉâÁï™Âè∑</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="usage">Âà©Áî®Áä∂Ê≥Å</th>
                                        <th class="text-left py-3 px-4 text-xs font-medium text-gray-400 uppercase tracking-wider" data-i18n="status">„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-800">
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Ad-Optimizer</td>
                                        <td class="py-3 px-4 text-sm font-mono">**** 3847</td>
                                        <td class="py-3 px-4 text-sm">¬•320K / ¬•400K</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="active">ÊúâÂäπ</span></td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Data-Crawler</td>
                                        <td class="py-3 px-4 text-sm font-mono">**** 1294</td>
                                        <td class="py-3 px-4 text-sm">¬•186K / ¬•300K</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="active">ÊúâÂäπ</span></td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">SaaS-Manager</td>
                                        <td class="py-3 px-4 text-sm font-mono">**** 7561</td>
                                        <td class="py-3 px-4 text-sm">¬•143K / ¬•200K</td>
                                        <td class="py-3 px-4"><span class="badge-approved px-2 py-1 rounded-full text-xs" data-i18n="active">ÊúâÂäπ</span></td>
                                    </tr>
                                    <tr class="hover:bg-gray-800/30">
                                        <td class="py-3 px-4 text-sm">Code-Assistant</td>
                                        <td class="py-3 px-4 text-sm font-mono">**** 8392</td>
                                        <td class="py-3 px-4 text-sm">¬•98K / ¬•200K</td>
                                        <td class="py-3 px-4"><span class="badge-frozen px-2 py-1 rounded-full text-xs" data-i18n="paused">‰∏ÄÊôÇÂÅúÊ≠¢</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Policies Section -->
                <section id="policies-view" class="view-section">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold" data-i18n="policies">„Éù„É™„Ç∑„Éº</h2>
                        <p class="text-sm text-gray-400" data-i18n="policies_subtitle">ÊîØÂá∫„É´„Éº„É´„ÇíË®≠ÂÆö</p>
                    </div>

                    <div class="grid gap-6">
                        <!-- Spending Limits -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold" data-i18n="spending_limits">ÊîØÂá∫‰∏äÈôê</h3>
                                <button class="text-primary hover:text-primary/80 text-sm font-medium" data-i18n="edit">Á∑®ÈõÜ</button>
                            </div>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="monthly_limit">ÊúàÈñì‰∏äÈôê</label>
                                    <input type="text" value="¬•1,200,000" class="w-full bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="transaction_limit">ÂèñÂºï‰∏äÈôê</label>
                                    <input type="text" value="¬•50,000" class="w-full bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-sm">
                                </div>
                            </div>
                        </div>

                        <!-- Approval Rules -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold" data-i18n="approval_rules">ÊâøË™ç„É´„Éº„É´</h3>
                                <button class="text-primary hover:text-primary/80 text-sm font-medium" data-i18n="edit">Á∑®ÈõÜ</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm" data-i18n="auto_approve_under">Ëá™ÂãïÊâøË™ç‰∏äÈôê</span>
                                    <span class="text-sm font-mono">¬•10,000</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm" data-i18n="unknown_merchants">‰∏çÊòé„Å™Âä†ÁõüÂ∫ó</span>
                                    <span class="text-sm text-yellow-400" data-i18n="require_approval">ÊâøË™çÂøÖË¶Å</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm" data-i18n="international_transactions">Êµ∑Â§ñÂèñÂºï</span>
                                    <span class="text-sm text-yellow-400" data-i18n="require_approval">ÊâøË™çÂøÖË¶Å</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- API Section -->
                <section id="api-view" class="view-section">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold">API</h2>
                        <p class="text-sm text-gray-400" data-i18n="api_subtitle">API „Ç≠„Éº„Å®„Éâ„Ç≠„É•„É°„É≥„Éà</p>
                    </div>

                    <div class="space-y-6">
                        <!-- API Keys -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold" data-i18n="api_keys">API„Ç≠„Éº</h3>
                                <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium" data-i18n="generate_key">
                                    + „Ç≠„ÉºÁîüÊàê
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-800/50 rounded-lg">
                                    <div>
                                        <div class="font-mono text-sm">sk_live_‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢1234</div>
                                        <div class="text-xs text-gray-400 mt-1" data-i18n="created_feb_15">‰ΩúÊàêÊó•: 2024Âπ¥2Êúà15Êó• ‚Ä¢ ÊúÄÁµÇ‰ΩøÁî®: 2ÊôÇÈñìÂâç</div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="text-primary hover:text-primary/80 text-sm font-medium" data-i18n="copy">„Ç≥„Éî„Éº</button>
                                        <button class="text-red-400 hover:text-red-300 text-sm font-medium" data-i18n="delete">ÂâäÈô§</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Code Example -->
                        <div class="bg-gray-900/50 border border-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4" data-i18n="code_example">„Ç≥„Éº„Éâ‰æã</h3>
                            <div class="bg-gray-950 border border-gray-800 rounded-lg p-4">
                                <pre class="text-sm overflow-x-auto"><code class="text-green-400"># Python SDK Example
from osaifu import OsAifuClient

# Initialize client
client = OsAifuClient(api_key="sk_live_your_api_key")

# Create payment request
payment = client.payments.create(
    agent_id="ad-optimizer",
    amount=45000,  # JPY
    merchant="Google Ads",
    description="Campaign optimization"
)

# Check payment status
if payment.status == "approved":
    print("Payment approved!")
else:
    print("Payment blocked:", payment.decline_reason)</code></pre>
                            </div>
                            <div class="mt-4 flex space-x-4">
                                <button class="text-primary hover:text-primary/80 text-sm font-medium" data-i18n="view_docs">üìö „Éâ„Ç≠„É•„É°„É≥„Éà</button>
                                <button class="text-primary hover:text-primary/80 text-sm font-medium" data-i18n="download_sdk">‚¨áÔ∏è SDK „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Agent Creation Modal -->
    <div id="agent-creation-modal" class="modal">
        <div class="bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold" data-i18n="create_new_agent">Êñ∞„Åó„ÅÑ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Çí‰ΩúÊàê</h2>
                    <button onclick="closeAgentCreationModal()" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <!-- Progress Indicator -->
                <div class="flex items-center justify-between mt-4">
                    <div class="flex space-x-2">
                        <div id="step-indicator-1" class="step-indicator active w-2.5 h-2.5 rounded-full bg-primary"></div>
                        <div id="step-indicator-2" class="step-indicator w-2.5 h-2.5 rounded-full bg-gray-600"></div>
                        <div id="step-indicator-3" class="step-indicator w-2.5 h-2.5 rounded-full bg-gray-600"></div>
                        <div id="step-indicator-4" class="step-indicator w-2.5 h-2.5 rounded-full bg-gray-600"></div>
                        <div id="step-indicator-5" class="step-indicator w-2.5 h-2.5 rounded-full bg-gray-600"></div>
                    </div>
                    <span id="step-counter" class="text-sm text-gray-400">1 / 5</span>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="p-6">
                <!-- Step 1: Basic Information -->
                <div id="step-1" class="step-content active">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2" data-i18n="step_1_basic_info">„Çπ„ÉÜ„ÉÉ„Éó 1: Âü∫Êú¨ÊÉÖÂ†±</h3>
                        <p class="text-sm text-gray-400" data-i18n="step_1_description">„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÂü∫Êú¨ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="agent_name">„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂêç</label>
                            <input id="agent-name" type="text" placeholder="‰æã: Ad-Optimizer" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-primary">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="agent_description">„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆË™¨Êòé</label>
                            <textarea id="agent-description" rows="3" placeholder="‰æã: Google/MetaÂ∫ÉÂëä„ÅÆËá™ÂãïÈÅãÁî®" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-primary resize-none"></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="team_department">„ÉÅ„Éº„É†/ÈÉ®ÈñÄ</label>
                            <select id="agent-team" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-primary">
                                <option value="" data-i18n="select_team">„ÉÅ„Éº„É†„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                <option value="marketing" data-i18n="team_marketing">„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞</option>
                                <option value="engineering" data-i18n="team_engineering">„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞</option>
                                <option value="data" data-i18n="team_data">„Éá„Éº„Çø</option>
                                <option value="it" data-i18n="team_it">IT</option>
                                <option value="support" data-i18n="team_support">„Çµ„Éù„Éº„Éà</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Card Settings -->
                <div id="step-2" class="step-content">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2" data-i18n="step_2_card_settings">„Çπ„ÉÜ„ÉÉ„Éó 2: „Ç´„Éº„ÉâË®≠ÂÆö</h3>
                        <p class="text-sm text-gray-400" data-i18n="step_2_description">„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÅÆË®≠ÂÆö„ÇíË°å„ÅÑ„Åæ„Åô</p>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-center justify-between p-4 bg-gray-800/30 rounded-lg">
                            <div>
                                <label class="text-sm font-medium" data-i18n="issue_virtual_card">„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÇíÁô∫Ë°å„Åô„Çã</label>
                                <p class="text-xs text-gray-400" data-i18n="card_recommended">„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÊ±∫Ê∏à„Å´Êé®Â•®</p>
                            </div>
                            <label class="toggle-switch">
                                <input id="issue-card-toggle" type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div id="card-settings" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="card_currency">„Ç´„Éº„Éâ„ÅÆÈÄöË≤®</label>
                                <div class="grid grid-cols-3 gap-3">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="card-currency" value="JPY" checked class="sr-only">
                                        <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                            <div class="text-lg">¬•</div>
                                            <div class="text-xs">JPY</div>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="card-currency" value="USD" class="sr-only">
                                        <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                            <div class="text-lg">$</div>
                                            <div class="text-xs">USD</div>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="card-currency" value="BRL" class="sr-only">
                                        <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                            <div class="text-lg">R$</div>
                                            <div class="text-xs">BRL</div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="card_nickname">„Ç´„Éº„Éâ„ÅÆ„Éã„ÉÉ„ÇØ„Éç„Éº„É†</label>
                                <input id="card-nickname" type="text" placeholder="Ad-Optimizer-001" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-primary">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Usage Limits -->
                <div id="step-3" class="step-content">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2" data-i18n="step_3_usage_limits">„Çπ„ÉÜ„ÉÉ„Éó 3: Âà©Áî®Âà∂Èôê</h3>
                        <p class="text-sm text-gray-400" data-i18n="step_3_description">„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÂà©Áî®Âà∂Èôê„ÇíË®≠ÂÆö„Åó„Åæ„Åô</p>
                    </div>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="monthly_limit_setting">ÊúàÈ°ç‰∏äÈôê</label>
                            <div class="space-y-3">
                                <input id="monthly-limit-slider" type="range" min="10000" max="1000000" value="200000" class="w-full range-slider">
                                <div class="flex items-center space-x-3">
                                    <span class="text-sm text-gray-400">¬•10,000</span>
                                    <input id="monthly-limit-input" type="text" value="¬•200,000" class="flex-1 bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-center">
                                    <span class="text-sm text-gray-400">¬•1,000,000</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="per_transaction_limit">1ÂèñÂºï„ÅÇ„Åü„Çä„ÅÆ‰∏äÈôê</label>
                            <div class="space-y-3">
                                <input id="transaction-limit-slider" type="range" min="1000" max="100000" value="50000" class="w-full range-slider">
                                <div class="flex items-center space-x-3">
                                    <span class="text-sm text-gray-400">¬•1,000</span>
                                    <input id="transaction-limit-input" type="text" value="¬•50,000" class="flex-1 bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-center">
                                    <span class="text-sm text-gray-400">¬•100,000</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="mcc_restrictions">MCCÂà∂Èôê</label>
                            <div class="grid grid-cols-2 gap-3">
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="mcc_advertising">Â∫ÉÂëä</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="mcc_cloud_saas">„ÇØ„É©„Ç¶„Éâ/SaaS</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="mcc_software">„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="mcc_marketplace">„Éû„Éº„Ç±„ÉÉ„Éà„Éó„É¨„Ç§„Çπ</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer col-span-2">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0" checked>
                                    <span class="text-sm" data-i18n="mcc_all_categories">ÂÖ®„Ç´„ÉÜ„Ç¥„É™Ë®±ÂèØ</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="time_restrictions">ÊôÇÈñìÂà∂Èôê</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="radio" name="time-restriction" value="business-hours" class="text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="business_hours_only">Âñ∂Ê•≠ÊôÇÈñì„ÅÆ„Åø(9-18ÊôÇ)</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="radio" name="time-restriction" value="weekdays-only" class="text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="weekdays_only">Âπ≥Êó•„ÅÆ„Åø</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="radio" name="time-restriction" value="no-restriction" class="text-primary focus:ring-primary focus:ring-offset-0" checked>
                                    <span class="text-sm" data-i18n="no_restrictions">Âà∂Èôê„Å™„Åó</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Approval Flow -->
                <div id="step-4" class="step-content">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2" data-i18n="step_4_approval_flow">„Çπ„ÉÜ„ÉÉ„Éó 4: ÊâøË™ç„Éï„É≠„Éº</h3>
                        <p class="text-sm text-gray-400" data-i18n="step_4_description">ÊâøË™ç„Éó„É≠„Çª„Çπ„ÅÆË®≠ÂÆö„ÇíË°å„ÅÑ„Åæ„Åô</p>
                    </div>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="auto_approval_limit">Ëá™ÂãïÊâøË™ç„ÅÆ‰∏äÈôêÈáëÈ°ç</label>
                            <div class="space-y-3">
                                <input id="auto-approval-slider" type="range" min="0" max="100000" value="10000" class="w-full range-slider">
                                <div class="flex items-center space-x-3">
                                    <span class="text-sm text-gray-400">¬•0</span>
                                    <input id="auto-approval-input" type="text" value="¬•10,000" class="flex-1 bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-center">
                                    <span class="text-sm text-gray-400">¬•100,000</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="above_limit_action">‰∏äÈôê„ÇíË∂Ö„Åà„ÅüÂ†¥Âêà„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="radio" name="above-limit-action" value="require-approval" class="text-primary focus:ring-primary focus:ring-offset-0" checked>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium" data-i18n="require_approval_option">ÊâøË™çÂæÖ„Å°</div>
                                        <div class="text-xs text-gray-400" data-i18n="require_approval_desc">ÁÆ°ÁêÜËÄÖ„ÅÆÊâøË™ç„ÇíÂæÖ„Å§</div>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="radio" name="above-limit-action" value="block" class="text-primary focus:ring-primary focus:ring-offset-0">
                                    <div class="flex-1">
                                        <div class="text-sm font-medium" data-i18n="block_option">„Éñ„É≠„ÉÉ„ÇØ</div>
                                        <div class="text-xs text-gray-400" data-i18n="block_desc">Âç≥Â∫ß„Å´ÂèñÂºï„ÇíÊãíÂê¶</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="notification_destination">ÈÄöÁü•ÂÖà</label>
                            <div class="grid grid-cols-3 gap-3">
                                <label class="flex items-center justify-center space-x-2 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0" checked>
                                    <span class="text-sm" data-i18n="email">„É°„Éº„É´</span>
                                </label>
                                <label class="flex items-center justify-center space-x-2 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm">Slack</span>
                                </label>
                                <label class="flex items-center justify-center space-x-2 p-3 bg-gray-800/30 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-0">
                                    <span class="text-sm" data-i18n="both">‰∏°Êñπ</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Confirmation -->
                <div id="step-5" class="step-content">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2" data-i18n="step_5_confirmation">„Çπ„ÉÜ„ÉÉ„Éó 5: Á¢∫Ë™çÁîªÈù¢</h3>
                        <p class="text-sm text-gray-400" data-i18n="step_5_description">Ë®≠ÂÆöÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                    
                    <div id="confirmation-summary" class="space-y-4 bg-gray-800/30 rounded-lg p-4">
                        <!-- Summary content will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Success Screen -->
                <div id="success-screen" class="step-content text-center" style="display: none;">
                    <div class="mb-6">
                        <div class="checkmark w-16 h-16 mx-auto mb-4 text-green-400">
                            <svg class="w-full h-full" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold mb-2" data-i18n="agent_created_success">„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åó„ÅüÔºÅ</h3>
                        <p class="text-sm text-gray-400" data-i18n="agent_created_description">Êñ∞„Åó„ÅÑ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åå„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„Åü</p>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="p-6 border-t border-gray-800 flex justify-between">
                <button id="prev-step-btn" onclick="previousStep()" class="px-6 py-2 text-gray-400 hover:text-white transition-colors" style="display: none;" data-i18n="previous">Ââç„Å∏</button>
                <div class="flex space-x-3 ml-auto">
                    <button onclick="closeAgentCreationModal()" class="px-6 py-2 text-gray-400 hover:text-white transition-colors" data-i18n="cancel">„Ç≠„É£„É≥„Çª„É´</button>
                    <button id="next-step-btn" onclick="nextStep()" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors" data-i18n="next">Ê¨°„Å∏</button>
                    <button id="create-agent-btn" onclick="createAgent()" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors" style="display: none;" data-i18n="create">‰ΩúÊàê</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Issuance Modal -->
    <div id="card-issuance-modal" class="modal">
        <div class="bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 w-full max-w-lg">
            <!-- Modal Header -->
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold" data-i18n="issue_new_card">Êñ∞„Åó„ÅÑ„Ç´„Éº„Éâ„ÇíÁô∫Ë°å</h2>
                    <button onclick="closeCardIssuanceModal()" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="p-6" id="card-issuance-form">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="agent_name">„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂêç</label>
                        <input id="card-agent-name" type="text" readonly class="w-full bg-gray-800/50 text-gray-400 px-4 py-3 rounded-lg border border-gray-700">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2" data-i18n="card_currency">„Ç´„Éº„Éâ„ÅÆÈÄöË≤®</label>
                        <div class="grid grid-cols-3 gap-3">
                            <label class="cursor-pointer">
                                <input type="radio" name="card-issuance-currency" value="JPY" checked class="sr-only">
                                <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                    <div class="text-lg">¬•</div>
                                    <div class="text-xs">JPY</div>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="card-issuance-currency" value="USD" class="sr-only">
                                <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                    <div class="text-lg">$</div>
                                    <div class="text-xs">USD</div>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="card-issuance-currency" value="BRL" class="sr-only">
                                <div class="border-2 border-gray-700 rounded-lg p-3 text-center hover:border-primary transition-colors currency-option">
                                    <div class="text-lg">R$</div>
                                    <div class="text-xs">BRL</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-3" data-i18n="monthly_limit_setting">ÊúàÈ°ç‰∏äÈôê</label>
                        <div class="space-y-3">
                            <input id="card-monthly-limit-slider" type="range" min="10000" max="1000000" value="200000" class="w-full range-slider">
                            <div class="flex items-center space-x-3">
                                <span class="text-sm text-gray-400">¬•10,000</span>
                                <input id="card-monthly-limit-input" type="text" value="¬•200,000" class="flex-1 bg-gray-800 text-white px-3 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-primary text-center">
                                <span class="text-sm text-gray-400">¬•1,000,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card Preview -->
            <div id="card-preview" class="p-6" style="display: none;">
                <div class="text-center">
                    <div class="card-visual card-appear w-full max-w-xs h-44 mx-auto rounded-xl relative overflow-hidden shadow-2xl mb-6">
                        <div class="absolute inset-0 p-4 flex flex-col justify-between">
                            <div class="flex justify-between items-start">
                                <div class="text-white">
                                    <div class="text-xs opacity-80">Virtual Card</div>
                                    <div class="font-semibold text-sm" id="preview-agent-name">Agent Name</div>
                                </div>
                                <div class="text-white text-lg font-bold">VISA</div>
                            </div>
                            <div class="text-white space-y-2">
                                <div class="font-mono text-sm" id="preview-card-number">**** **** **** 1234</div>
                                <div class="flex justify-between items-end">
                                    <div>
                                        <div class="text-xs opacity-80">EXP</div>
                                        <div class="text-xs font-mono" id="preview-expiry">12/28</div>
                                    </div>
                                    <div>
                                        <div class="text-xs opacity-80">CVC</div>
                                        <div class="text-xs font-mono" id="preview-cvc">***</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-400" data-i18n="card_number">„Ç´„Éº„ÉâÁï™Âè∑</span>
                            <div class="flex items-center space-x-2">
                                <span id="masked-card-number" class="font-mono">**** **** **** 1234</span>
                                <button onclick="toggleCardDetails('card-number')" class="text-primary hover:text-primary/80 text-xs" data-i18n="show">Ë°®Á§∫</button>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-400">CVC</span>
                            <div class="flex items-center space-x-2">
                                <span id="masked-cvc" class="font-mono">***</span>
                                <button onclick="toggleCardDetails('cvc')" class="text-primary hover:text-primary/80 text-xs" data-i18n="show">Ë°®Á§∫</button>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-400" data-i18n="expiry_date">ÊúâÂäπÊúüÈôê</span>
                            <span class="font-mono">12/2028</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="p-6 border-t border-gray-800 flex justify-between">
                <button onclick="closeCardIssuanceModal()" class="px-6 py-2 text-gray-400 hover:text-white transition-colors" data-i18n="cancel">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="issue-card-btn" onclick="issueCard()" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors" data-i18n="issue_card">„Ç´„Éº„Éâ„ÇíÁô∫Ë°å</button>
            </div>
        </div>
    </div>

    <script>
        // Internationalization
        const i18n = {
            jp: {
                overview: 'Ê¶ÇË¶Å',
                overview_subtitle: 'AI „Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆË≤°ÂãôÊ¥ªÂãï„ÇíÁõ£Ë¶ñ',
                transactions: 'ÂèñÂºïÂ±•Ê≠¥',
                transactions_subtitle: '„Åô„Åπ„Å¶„ÅÆÂèñÂºï„ÇíË°®Á§∫',
                cards: '„Ç´„Éº„ÉâÁÆ°ÁêÜ',
                cards_subtitle: '„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÇíÁÆ°ÁêÜ',
                policies: '„Éù„É™„Ç∑„Éº',
                policies_subtitle: 'ÊîØÂá∫„É´„Éº„É´„ÇíË®≠ÂÆö',
                api: 'API',
                api_subtitle: 'API „Ç≠„Éº„Å®„Éâ„Ç≠„É•„É°„É≥„Éà',
                monthly_spend: '‰ªäÊúà„ÅÆÂà©Áî®È°ç',
                budget_usage: '‰∫àÁÆó‰ΩøÁî®Áéá',
                active_agents: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Ç®„Éº„Ç∏„Çß„É≥„Éà',
                all_operational: '„Åô„Åπ„Å¶Á®ºÂÉç‰∏≠',
                add_agent: '+ „Ç®„Éº„Ç∏„Çß„É≥„ÉàËøΩÂä†',
                add_card: '+ „Ç´„Éº„ÉâËøΩÂä†',
                agents_list: '„Ç®„Éº„Ç∏„Çß„É≥„Éà‰∏ÄË¶ß',
                active: 'ÊúâÂäπ',
                paused: '‰∏ÄÊôÇÂÅúÊ≠¢',
                approved: 'ÊâøË™çÊ∏à„Åø',
                blocked: '„Éñ„É≠„ÉÉ„ÇØ',
                agent: '„Ç®„Éº„Ç∏„Çß„É≥„Éà',
                merchant: 'Âä†ÁõüÂ∫ó',
                amount: 'ÈáëÈ°ç',
                status: '„Çπ„ÉÜ„Éº„Çø„Çπ',
                time: 'ÊôÇÈñì',
                time_2h_ago: '2ÊôÇÈñìÂâç',
                time_4h_ago: '4ÊôÇÈñìÂâç',
                time_6h_ago: '6ÊôÇÈñìÂâç',
                time_8h_ago: '8ÊôÇÈñìÂâç',
                unknown_merchant: '‰∏çÊòé„Å™Âä†ÁõüÂ∫ó',
                search_transactions: 'ÂèñÂºï„ÇíÊ§úÁ¥¢...',
                all_agents: 'ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà',
                last_30_days: 'ÈÅéÂéª30Êó•',
                last_7_days: 'ÈÅéÂéª7Êó•',
                today: '‰ªäÊó•',
                card_details: '„Ç´„Éº„ÉâË©≥Á¥∞',
                card_number: '„Ç´„Éº„ÉâÁï™Âè∑',
                monthly_spend: 'ÊúàÈñìÂà©Áî®È°ç',
                view_details: 'Ë©≥Á¥∞Ë°®Á§∫',
                freeze_card: '„Ç´„Éº„ÉâÂáçÁµê',
                all_cards: 'ÂÖ®„Ç´„Éº„Éâ',
                usage: 'Âà©Áî®Áä∂Ê≥Å',
                spending_limits: 'ÊîØÂá∫‰∏äÈôê',
                monthly_limit: 'ÊúàÈñì‰∏äÈôê',
                transaction_limit: 'ÂèñÂºï‰∏äÈôê',
                approval_rules: 'ÊâøË™ç„É´„Éº„É´',
                auto_approve_under: 'Ëá™ÂãïÊâøË™ç‰∏äÈôê',
                unknown_merchants: '‰∏çÊòé„Å™Âä†ÁõüÂ∫ó',
                international_transactions: 'Êµ∑Â§ñÂèñÂºï',
                require_approval: 'ÊâøË™çÂøÖË¶Å',
                edit: 'Á∑®ÈõÜ',
                api_keys: 'API„Ç≠„Éº',
                generate_key: '+ „Ç≠„ÉºÁîüÊàê',
                created_feb_15: '‰ΩúÊàêÊó•: 2024Âπ¥2Êúà15Êó• ‚Ä¢ ÊúÄÁµÇ‰ΩøÁî®: 2ÊôÇÈñìÂâç',
                copy: '„Ç≥„Éî„Éº',
                delete: 'ÂâäÈô§',
                code_example: '„Ç≥„Éº„Éâ‰æã',
                view_docs: 'üìö „Éâ„Ç≠„É•„É°„É≥„Éà',
                download_sdk: '‚¨áÔ∏è SDK „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ',
                
                // Agent creation modal
                create_new_agent: 'Êñ∞„Åó„ÅÑ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Çí‰ΩúÊàê',
                step_1_basic_info: '„Çπ„ÉÜ„ÉÉ„Éó 1: Âü∫Êú¨ÊÉÖÂ†±',
                step_1_description: '„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÂü∫Êú¨ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                agent_name: '„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂêç',
                agent_description: '„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆË™¨Êòé',
                team_department: '„ÉÅ„Éº„É†/ÈÉ®ÈñÄ',
                select_team: '„ÉÅ„Éº„É†„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                team_marketing: '„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞',
                team_engineering: '„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞',
                team_data: '„Éá„Éº„Çø',
                team_it: 'IT',
                team_support: '„Çµ„Éù„Éº„Éà',
                
                step_2_card_settings: '„Çπ„ÉÜ„ÉÉ„Éó 2: „Ç´„Éº„ÉâË®≠ÂÆö',
                step_2_description: '„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÅÆË®≠ÂÆö„ÇíË°å„ÅÑ„Åæ„Åô',
                issue_virtual_card: '„Éê„Éº„ÉÅ„É£„É´„Ç´„Éº„Éâ„ÇíÁô∫Ë°å„Åô„Çã',
                card_recommended: '„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÊ±∫Ê∏à„Å´Êé®Â•®',
                card_currency: '„Ç´„Éº„Éâ„ÅÆÈÄöË≤®',
                card_nickname: '„Ç´„Éº„Éâ„ÅÆ„Éã„ÉÉ„ÇØ„Éç„Éº„É†',
                
                step_3_usage_limits: '„Çπ„ÉÜ„ÉÉ„Éó 3: Âà©Áî®Âà∂Èôê',
                step_3_description: '„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÂà©Áî®Âà∂Èôê„ÇíË®≠ÂÆö„Åó„Åæ„Åô',
                monthly_limit_setting: 'ÊúàÈ°ç‰∏äÈôê',
                per_transaction_limit: '1ÂèñÂºï„ÅÇ„Åü„Çä„ÅÆ‰∏äÈôê',
                mcc_restrictions: 'MCCÂà∂Èôê',
                mcc_advertising: 'Â∫ÉÂëä',
                mcc_cloud_saas: '„ÇØ„É©„Ç¶„Éâ/SaaS',
                mcc_software: '„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢',
                mcc_marketplace: '„Éû„Éº„Ç±„ÉÉ„Éà„Éó„É¨„Ç§„Çπ',
                mcc_all_categories: 'ÂÖ®„Ç´„ÉÜ„Ç¥„É™Ë®±ÂèØ',
                time_restrictions: 'ÊôÇÈñìÂà∂Èôê',
                business_hours_only: 'Âñ∂Ê•≠ÊôÇÈñì„ÅÆ„Åø(9-18ÊôÇ)',
                weekdays_only: 'Âπ≥Êó•„ÅÆ„Åø',
                no_restrictions: 'Âà∂Èôê„Å™„Åó',
                
                step_4_approval_flow: '„Çπ„ÉÜ„ÉÉ„Éó 4: ÊâøË™ç„Éï„É≠„Éº',
                step_4_description: 'ÊâøË™ç„Éó„É≠„Çª„Çπ„ÅÆË®≠ÂÆö„ÇíË°å„ÅÑ„Åæ„Åô',
                auto_approval_limit: 'Ëá™ÂãïÊâøË™ç„ÅÆ‰∏äÈôêÈáëÈ°ç',
                above_limit_action: '‰∏äÈôê„ÇíË∂Ö„Åà„ÅüÂ†¥Âêà„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥',
                require_approval_option: 'ÊâøË™çÂæÖ„Å°',
                require_approval_desc: 'ÁÆ°ÁêÜËÄÖ„ÅÆÊâøË™ç„ÇíÂæÖ„Å§',
                block_option: '„Éñ„É≠„ÉÉ„ÇØ',
                block_desc: 'Âç≥Â∫ß„Å´ÂèñÂºï„ÇíÊãíÂê¶',
                notification_destination: 'ÈÄöÁü•ÂÖà',
                email: '„É°„Éº„É´',
                both: '‰∏°Êñπ',
                
                step_5_confirmation: '„Çπ„ÉÜ„ÉÉ„Éó 5: Á¢∫Ë™çÁîªÈù¢',
                step_5_description: 'Ë®≠ÂÆöÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                agent_created_success: '„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åó„ÅüÔºÅ',
                agent_created_description: 'Êñ∞„Åó„ÅÑ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åå„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„Åü',
                
                previous: 'Ââç„Å∏',
                next: 'Ê¨°„Å∏',
                cancel: '„Ç≠„É£„É≥„Çª„É´',
                create: '‰ΩúÊàê',
                
                // Card issuance modal
                issue_new_card: 'Êñ∞„Åó„ÅÑ„Ç´„Éº„Éâ„ÇíÁô∫Ë°å',
                issue_card: '„Ç´„Éº„Éâ„ÇíÁô∫Ë°å',
                show: 'Ë°®Á§∫',
                hide: 'Èö†„Åô',
                expiry_date: 'ÊúâÂäπÊúüÈôê'
            },
            en: {
                overview: 'Overview',
                overview_subtitle: 'Monitor your AI agents\' financial activity',
                transactions: 'Transactions',
                transactions_subtitle: 'View all transactions',
                cards: 'Card Management',
                cards_subtitle: 'Manage virtual cards',
                policies: 'Policies',
                policies_subtitle: 'Configure spending rules',
                api: 'API',
                api_subtitle: 'API keys and documentation',
                monthly_spend: 'Monthly Spend',
                budget_usage: 'Budget Usage',
                active_agents: 'Active Agents',
                all_operational: 'All Operational',
                add_agent: '+ Add Agent',
                add_card: '+ Add Card',
                agents_list: 'Agent List',
                active: 'Active',
                paused: 'Paused',
                approved: 'Approved',
                blocked: 'Blocked',
                agent: 'Agent',
                merchant: 'Merchant',
                amount: 'Amount',
                status: 'Status',
                time: 'Time',
                time_2h_ago: '2 hours ago',
                time_4h_ago: '4 hours ago',
                time_6h_ago: '6 hours ago',
                time_8h_ago: '8 hours ago',
                unknown_merchant: 'Unknown Merchant',
                search_transactions: 'Search transactions...',
                all_agents: 'All Agents',
                last_30_days: 'Last 30 days',
                last_7_days: 'Last 7 days',
                today: 'Today',
                card_details: 'Card Details',
                card_number: 'Card Number',
                monthly_spend: 'Monthly Spend',
                view_details: 'View Details',
                freeze_card: 'Freeze Card',
                all_cards: 'All Cards',
                usage: 'Usage',
                spending_limits: 'Spending Limits',
                monthly_limit: 'Monthly Limit',
                transaction_limit: 'Transaction Limit',
                approval_rules: 'Approval Rules',
                auto_approve_under: 'Auto-approve under',
                unknown_merchants: 'Unknown merchants',
                international_transactions: 'International transactions',
                require_approval: 'Require approval',
                edit: 'Edit',
                api_keys: 'API Keys',
                generate_key: '+ Generate Key',
                created_feb_15: 'Created: Feb 15, 2024 ‚Ä¢ Last used: 2 hours ago',
                copy: 'Copy',
                delete: 'Delete',
                code_example: 'Code Example',
                view_docs: 'üìö Documentation',
                download_sdk: '‚¨áÔ∏è Download SDK',
                
                // Agent creation modal
                create_new_agent: 'Create New Agent',
                step_1_basic_info: 'Step 1: Basic Information',
                step_1_description: 'Enter basic information about the agent',
                agent_name: 'Agent Name',
                agent_description: 'Agent Description',
                team_department: 'Team/Department',
                select_team: 'Select a team',
                team_marketing: 'Marketing',
                team_engineering: 'Engineering',
                team_data: 'Data',
                team_it: 'IT',
                team_support: 'Support',
                
                step_2_card_settings: 'Step 2: Card Settings',
                step_2_description: 'Configure virtual card settings',
                issue_virtual_card: 'Issue Virtual Card',
                card_recommended: 'Recommended for agent payments',
                card_currency: 'Card Currency',
                card_nickname: 'Card Nickname',
                
                step_3_usage_limits: 'Step 3: Usage Limits',
                step_3_description: 'Set usage limits for the agent',
                monthly_limit_setting: 'Monthly Limit',
                per_transaction_limit: 'Per Transaction Limit',
                mcc_restrictions: 'MCC Restrictions',
                mcc_advertising: 'Advertising',
                mcc_cloud_saas: 'Cloud/SaaS',
                mcc_software: 'Software',
                mcc_marketplace: 'Marketplace',
                mcc_all_categories: 'All Categories',
                time_restrictions: 'Time Restrictions',
                business_hours_only: 'Business Hours Only (9-18)',
                weekdays_only: 'Weekdays Only',
                no_restrictions: 'No Restrictions',
                
                step_4_approval_flow: 'Step 4: Approval Flow',
                step_4_description: 'Configure approval process',
                auto_approval_limit: 'Auto-approval Limit',
                above_limit_action: 'Action Above Limit',
                require_approval_option: 'Require Approval',
                require_approval_desc: 'Wait for admin approval',
                block_option: 'Block',
                block_desc: 'Reject transaction immediately',
                notification_destination: 'Notification Destination',
                email: 'Email',
                both: 'Both',
                
                step_5_confirmation: 'Step 5: Confirmation',
                step_5_description: 'Review your settings',
                agent_created_success: 'Agent Created Successfully!',
                agent_created_description: 'The new agent has been added to your dashboard',
                
                previous: 'Previous',
                next: 'Next',
                cancel: 'Cancel',
                create: 'Create',
                
                // Card issuance modal
                issue_new_card: 'Issue New Card',
                issue_card: 'Issue Card',
                show: 'Show',
                hide: 'Hide',
                expiry_date: 'Expiry Date'
            }
        };

        let currentLang = 'jp';
        let currentStep = 1;
        let maxSteps = 5;

        // Agent creation modal functions
        function openAgentCreationModal() {
            document.getElementById('agent-creation-modal').classList.add('active');
            currentStep = 1;
            updateStepIndicators();
            updateStepButtons();
        }

        function closeAgentCreationModal() {
            document.getElementById('agent-creation-modal').classList.remove('active');
            resetModalForm();
        }

        function resetModalForm() {
            // Reset form fields
            document.getElementById('agent-name').value = '';
            document.getElementById('agent-description').value = '';
            document.getElementById('agent-team').value = '';
            document.getElementById('issue-card-toggle').checked = true;
            document.querySelector('input[name="card-currency"][value="JPY"]').checked = true;
            document.getElementById('card-nickname').value = '';
            
            // Reset sliders
            document.getElementById('monthly-limit-slider').value = 200000;
            document.getElementById('monthly-limit-input').value = '¬•200,000';
            document.getElementById('transaction-limit-slider').value = 50000;
            document.getElementById('transaction-limit-input').value = '¬•50,000';
            document.getElementById('auto-approval-slider').value = 10000;
            document.getElementById('auto-approval-input').value = '¬•10,000';
            
            // Reset checkboxes and radio buttons
            document.querySelectorAll('#agent-creation-modal input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('#agent-creation-modal input[type="radio"]').forEach(rb => rb.checked = false);
            
            // Set default selections
            document.getElementById('issue-card-toggle').checked = true;
            document.querySelector('input[name="card-currency"][value="JPY"]').checked = true;
            document.querySelector('input[name="time-restriction"][value="no-restriction"]').checked = true;
            document.querySelector('input[name="above-limit-action"][value="require-approval"]').checked = true;
            document.querySelector('#agent-creation-modal input[type="checkbox"][checked]').checked = true;
            
            currentStep = 1;
            updateStepIndicators();
            updateStepButtons();
            showStep(1);
        }

        function nextStep() {
            if (currentStep < maxSteps) {
                if (currentStep === 5) {
                    generateConfirmationSummary();
                }
                currentStep++;
                updateStepIndicators();
                updateStepButtons();
                showStep(currentStep);
                
                // Update card nickname automatically
                if (currentStep === 2) {
                    updateCardNickname();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepIndicators();
                updateStepButtons();
                showStep(currentStep);
            }
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
                content.classList.add('prev');
            });
            
            // Show current step
            setTimeout(() => {
                document.getElementById(`step-${step}`).classList.remove('prev');
                document.getElementById(`step-${step}`).classList.add('active');
            }, 150);
        }

        function updateStepIndicators() {
            for (let i = 1; i <= maxSteps; i++) {
                const indicator = document.getElementById(`step-indicator-${i}`);
                if (i <= currentStep) {
                    indicator.classList.add('active');
                    indicator.style.backgroundColor = '#635BFF';
                } else {
                    indicator.classList.remove('active');
                    indicator.style.backgroundColor = '#4B5563';
                }
            }
            document.getElementById('step-counter').textContent = `${currentStep} / ${maxSteps}`;
        }

        function updateStepButtons() {
            const prevBtn = document.getElementById('prev-step-btn');
            const nextBtn = document.getElementById('next-step-btn');
            const createBtn = document.getElementById('create-agent-btn');
            
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            
            if (currentStep === maxSteps) {
                nextBtn.style.display = 'none';
                createBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                createBtn.style.display = 'none';
            }
        }

        function updateCardNickname() {
            const agentName = document.getElementById('agent-name').value;
            if (agentName) {
                document.getElementById('card-nickname').value = `${agentName}-001`;
            }
        }

        function generateConfirmationSummary() {
            const agentName = document.getElementById('agent-name').value;
            const agentDescription = document.getElementById('agent-description').value;
            const agentTeam = document.getElementById('agent-team').value;
            const issueCard = document.getElementById('issue-card-toggle').checked;
            const cardCurrency = document.querySelector('input[name="card-currency"]:checked')?.value;
            const cardNickname = document.getElementById('card-nickname').value;
            const monthlyLimit = document.getElementById('monthly-limit-input').value;
            const transactionLimit = document.getElementById('transaction-limit-input').value;
            const autoApprovalLimit = document.getElementById('auto-approval-input').value;
            
            const teams = {
                marketing: currentLang === 'jp' ? '„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞' : 'Marketing',
                engineering: currentLang === 'jp' ? '„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞' : 'Engineering',
                data: currentLang === 'jp' ? '„Éá„Éº„Çø' : 'Data',
                it: 'IT',
                support: currentLang === 'jp' ? '„Çµ„Éù„Éº„Éà' : 'Support'
            };
            
            const summary = document.getElementById('confirmation-summary');
            summary.innerHTML = `
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].agent_name}:</span>
                        <span class="font-medium">${agentName}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].team_department}:</span>
                        <span>${teams[agentTeam] || agentTeam}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].issue_virtual_card}:</span>
                        <span class="${issueCard ? 'text-green-400' : 'text-red-400'}">${issueCard ? (currentLang === 'jp' ? '„ÅØ„ÅÑ' : 'Yes') : (currentLang === 'jp' ? '„ÅÑ„ÅÑ„Åà' : 'No')}</span>
                    </div>
                    ${issueCard ? `
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].card_currency}:</span>
                        <span>${cardCurrency}</span>
                    </div>
                    ` : ''}
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].monthly_limit}:</span>
                        <span>${monthlyLimit}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].transaction_limit}:</span>
                        <span>${transactionLimit}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-400">${i18n[currentLang].auto_approval_limit}:</span>
                        <span>${autoApprovalLimit}</span>
                    </div>
                </div>
            `;
        }

        function createAgent() {
            // Show success animation
            document.getElementById('step-5').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
            document.getElementById('success-screen').classList.add('active');
            
            // Hide footer buttons
            document.querySelector('#agent-creation-modal .p-6.border-t').style.display = 'none';
            
            // Add new agent to the list (dummy data)
            setTimeout(() => {
                const agentName = document.getElementById('agent-name').value || 'New-Agent';
                const agentTeam = document.getElementById('agent-team').value || 'marketing';
                const monthlyLimit = document.getElementById('monthly-limit-input').value.replace('¬•', '').replace(',', '') || '200000';
                
                const teams = {
                    marketing: currentLang === 'jp' ? 'Marketing Team' : 'Marketing Team',
                    engineering: currentLang === 'jp' ? 'Engineering Team' : 'Engineering Team',
                    data: currentLang === 'jp' ? 'Data Team' : 'Data Team',
                    it: currentLang === 'jp' ? 'IT Team' : 'IT Team',
                    support: currentLang === 'jp' ? 'Support Team' : 'Support Team'
                };
                
                const agentContainer = document.getElementById('agents-container');
                const newAgentHtml = `
                    <div class="flex items-center justify-between py-4 border-b border-gray-800 last:border-b-0">
                        <div class="flex items-center space-x-4">
                            <div class="status-dot status-active"></div>
                            <div>
                                <h4 class="font-medium">${agentName}</h4>
                                <p class="text-sm text-gray-400">${teams[agentTeam]}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-6">
                            <div class="w-32">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">Âà©Áî®È°ç</span>
                                    <span><span class="inline-edit" data-current="0" data-max="${monthlyLimit}" onclick="enableInlineEdit(this)">¬•0</span> / ¬•${parseInt(monthlyLimit/1000)}K</span>
                                </div>
                                <div class="w-full bg-gray-800 rounded-full h-1.5">
                                    <div class="progress-bar h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                            <span class="badge-approved px-3 py-1 rounded-full text-xs font-medium" data-i18n="active">ÊúâÂäπ</span>
                        </div>
                    </div>
                `;
                
                agentContainer.insertAdjacentHTML('beforeend', newAgentHtml);
                
                // Update agent count
                const currentCount = parseInt(document.getElementById('agent-count').textContent);
                document.getElementById('agent-count').textContent = currentCount + 1;
                
                // Close modal after showing success
                setTimeout(() => {
                    closeAgentCreationModal();
                    // Reset success screen
                    document.getElementById('success-screen').style.display = 'none';
                    document.getElementById('step-5').style.display = 'block';
                    document.querySelector('#agent-creation-modal .p-6.border-t').style.display = 'flex';
                }, 2000);
            }, 1500);
        }

        // Card issuance modal functions
        function openCardIssuanceModal(agentName) {
            document.getElementById('card-issuance-modal').classList.add('active');
            document.getElementById('card-agent-name').value = agentName;
            document.getElementById('card-issuance-form').style.display = 'block';
            document.getElementById('card-preview').style.display = 'none';
            document.getElementById('issue-card-btn').style.display = 'block';
        }

        function closeCardIssuanceModal() {
            document.getElementById('card-issuance-modal').classList.remove('active');
        }

        function issueCard() {
            // Generate fake card details
            const cardNumber = generateCardNumber();
            const cvc = generateCVC();
            const expiry = generateExpiry();
            const agentName = document.getElementById('card-agent-name').value;
            
            // Update preview
            document.getElementById('preview-agent-name').textContent = agentName;
            document.getElementById('preview-card-number').textContent = cardNumber.replace(/(.{4})/g, '$1 ');
            document.getElementById('preview-expiry').textContent = expiry.slice(0, 2) + '/' + expiry.slice(2);
            document.getElementById('preview-cvc').textContent = '***';
            
            document.getElementById('masked-card-number').textContent = `**** **** **** ${cardNumber.slice(-4)}`;
            document.getElementById('masked-cvc').textContent = '***';
            
            // Store real values for toggle
            document.getElementById('masked-card-number').setAttribute('data-real', cardNumber.replace(/(.{4})/g, '$1 ').trim());
            document.getElementById('masked-cvc').setAttribute('data-real', cvc);
            
            // Show preview
            document.getElementById('card-issuance-form').style.display = 'none';
            document.getElementById('card-preview').style.display = 'block';
            document.getElementById('issue-card-btn').style.display = 'none';
        }

        function toggleCardDetails(type) {
            const element = type === 'card-number' ? 
                document.getElementById('masked-card-number') : 
                document.getElementById('masked-cvc');
            const button = element.parentNode.querySelector('button');
            
            if (element.textContent.includes('*')) {
                element.textContent = element.getAttribute('data-real');
                button.textContent = i18n[currentLang].hide;
                // Hide after 3 seconds
                setTimeout(() => {
                    if (type === 'card-number') {
                        element.textContent = `**** **** **** ${element.getAttribute('data-real').slice(-4)}`;
                    } else {
                        element.textContent = '***';
                    }
                    button.textContent = i18n[currentLang].show;
                }, 3000);
            }
        }

        function generateCardNumber() {
            return '4' + Math.random().toString().slice(2, 16);
        }

        function generateCVC() {
            return Math.floor(Math.random() * 900 + 100).toString();
        }

        function generateExpiry() {
            const year = new Date().getFullYear() + 4;
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            return month + year.toString().slice(-2);
        }

        // Inline editing functions
        function enableInlineEdit(element) {
            const currentValue = element.getAttribute('data-current');
            const maxValue = element.getAttribute('data-max');
            
            const input = document.createElement('input');
            input.className = 'inline-edit-input';
            input.type = 'text';
            input.value = '¬•' + (parseInt(currentValue) / 1000) + 'K';
            
            element.parentNode.replaceChild(input, element);
            input.focus();
            input.select();
            
            function finishEdit() {
                let value = input.value.replace('¬•', '').replace('K', '').replace(',', '');
                value = parseInt(value) * 1000;
                
                if (isNaN(value) || value < 0) {
                    value = parseInt(currentValue);
                }
                
                const newElement = element.cloneNode(true);
                newElement.textContent = '¬•' + (value / 1000) + 'K';
                newElement.setAttribute('data-current', value.toString());
                
                input.parentNode.replaceChild(newElement, input);
                
                // Update progress bar
                const progressBar = newElement.closest('.py-4').querySelector('.progress-bar');
                const percentage = (value / parseInt(maxValue)) * 100;
                progressBar.style.width = Math.min(percentage, 100) + '%';
            }
            
            input.addEventListener('blur', finishEdit);
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    finishEdit();
                }
            });
        }

        // Slider event handlers
        function setupSliders() {
            const sliders = [
                { slider: 'monthly-limit-slider', input: 'monthly-limit-input', prefix: '¬•', suffix: '', divider: 1 },
                { slider: 'transaction-limit-slider', input: 'transaction-limit-input', prefix: '¬•', suffix: '', divider: 1 },
                { slider: 'auto-approval-slider', input: 'auto-approval-input', prefix: '¬•', suffix: '', divider: 1 },
                { slider: 'card-monthly-limit-slider', input: 'card-monthly-limit-input', prefix: '¬•', suffix: '', divider: 1 }
            ];
            
            sliders.forEach(({ slider, input, prefix, suffix, divider }) => {
                const sliderEl = document.getElementById(slider);
                const inputEl = document.getElementById(input);
                
                if (sliderEl && inputEl) {
                    sliderEl.addEventListener('input', function() {
                        const value = parseInt(this.value);
                        inputEl.value = prefix + (value / divider).toLocaleString() + suffix;
                    });
                    
                    inputEl.addEventListener('input', function() {
                        let value = this.value.replace(prefix, '').replace(suffix, '').replace(/,/g, '');
                        value = parseInt(value) * divider;
                        if (!isNaN(value)) {
                            sliderEl.value = value;
                        }
                    });
                }
            });
        }

        // Currency option handlers
        function setupCurrencyOptions() {
            document.querySelectorAll('.currency-option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.parentElement.querySelector('input[type="radio"]');
                    radio.checked = true;
                    
                    // Update visual state
                    document.querySelectorAll('.currency-option').forEach(opt => {
                        opt.classList.remove('border-primary');
                        opt.classList.add('border-gray-700');
                    });
                    this.classList.remove('border-gray-700');
                    this.classList.add('border-primary');
                });
            });
        }

        // View switching
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('.view-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active state from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected view
            document.getElementById(viewName + '-view').classList.add('active');
            
            // Add active state to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            // Update page title and subtitle
            const titles = {
                overview: { titleKey: 'overview', subtitleKey: 'overview_subtitle' },
                transactions: { titleKey: 'transactions', subtitleKey: 'transactions_subtitle' },
                cards: { titleKey: 'cards', subtitleKey: 'cards_subtitle' },
                policies: { titleKey: 'policies', subtitleKey: 'policies_subtitle' },
                api: { titleKey: 'api', subtitleKey: 'api_subtitle' }
            };
            
            const pageInfo = titles[viewName];
            document.getElementById('page-title').textContent = i18n[currentLang][pageInfo.titleKey];
            document.getElementById('page-subtitle').textContent = i18n[currentLang][pageInfo.subtitleKey];
        }

        // Language switching
        function switchLanguage(lang) {
            currentLang = lang;
            
            // Update language toggle buttons
            document.getElementById('lang-jp').classList.toggle('active', lang === 'jp');
            document.getElementById('lang-en').classList.toggle('active', lang === 'en');
            
            // Update all translatable elements
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (i18n[lang][key]) {
                    element.textContent = i18n[lang][key];
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (i18n[lang][key]) {
                    element.placeholder = i18n[lang][key];
                }
            });
            
            // Update document language
            document.documentElement.lang = lang;
        }

        // Toggle card settings visibility
        document.addEventListener('change', function(e) {
            if (e.target.id === 'issue-card-toggle') {
                const cardSettings = document.getElementById('card-settings');
                cardSettings.style.display = e.target.checked ? 'block' : 'none';
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial language
            switchLanguage(currentLang);
            
            // Setup interactive elements
            setupSliders();
            setupCurrencyOptions();
            
            // Auto-update card nickname when agent name changes
            document.getElementById('agent-name')?.addEventListener('input', updateCardNickname);
        });
    </script>
</body>
</html>